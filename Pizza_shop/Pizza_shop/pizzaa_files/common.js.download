var urlVariables=getUrlVars(),isZipprMapLoaded=!1;function showPageBlocker(){$(".preloaderWrap").fadeIn(200).css("height",$(document).height()),$(".preloaderWrap .preloader").css({top:$(window).height()/2+"px",position:"fixed"})}function hidePageBlocker(){$(".preloaderWrap").fadeOut(200)}function showPageBlockerForStoreLocator(){$(".preloaderWrapForStoreLocator").fadeIn(200).css("height","auto")}function hidePageBlockerForStoreLocator(){$(".preloaderWrapForStoreLocator").fadeOut(200)}function hidePageBlockerIframe(){}function getPostFieldsForSms(){if(""!=$.trim($("#smscode").val()))showPageBlocker(),$.prompt('<h3 style="padding-left:10px;">Please Wait..</h3><p style="padding:10px">Validation in progress... Please do not refresh.</p><p style="padding-bottom:10px" align="center"><img src="'+imageStaticUrl+'/images/redirect.gif" alt="Redirecting..." /></p>'),$.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}}),$(".jqidefaultbutton").css("display","none"),$(".jqiclose").css("display","none"),$("#smsFormIvr").submit();else{$.prompt("Please enter authorisation code.",{title:"Alert!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&$(".jqibox").css("display","none")}})}}function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,a,r){e[a]=r});return e}function internalServerMsg(){$.prompt("Some internal error occured. Please try again!",{title:"Error!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&(parent.window.location.href=baseurl+"?user_signup=error")}})}function wrongKeyMsg(){hidePageBlocker();$.prompt("It appears that you have pressed the wrong key. Please try again.",{title:"Error!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&($(".jqibox ").css("display","none"),$(".jqiclose").css("display","none"))}})}function notPressedMsg(){hidePageBlocker();$.prompt("It appears that you have not pressed any key. Please try again.",{title:"Error!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&($(".jqibox ").css("display","none"),$(".jqiclose").css("display","none"))}})}function maxAttemptMsg(){hidePageBlocker();$.prompt("You seemed to have reach maximum number of attempts. Please try after some time.",{title:"Error!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&(parent.window.location.href=baseurl+"?user_signup=error")}})}function tryAgainMsg(){hidePageBlocker();$.prompt("Please Try again",{title:"Error!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&(parent.window.location.href=baseurl+"?user_signup=error")}})}function displayErrorMessage(e,t,a,r){hidePageBlocker(),void 0!==e&&""!=e?(1001==e&&(e="You are already registerd with us! Please try with forgot password."),$(".jqibox ").css("display","none"),$(".jqiclose").css("display","none"),$.prompt(e,{title:"Alert!",buttons:{OK:!0},submit:function(e,a,r,o){1==a&&(void 0!==t&&"1001"==t?($("#login").trigger("click"),$(".forgetPass").show(),$("#captcha").attr("src",baseurl+"/getcaptcha"),$(".newUser").hide(),$(".loginLeft").hide(),$(".loginRight").hide(),$("#linkSubmit").attr("enabled","enabled")):void 0!==t&&"signup"==t&&$(".signup a").trigger("click"))}})):void 0!==a&&""!=a&&(window.location=baseurl+a),void 0!==r&&""!=r&&void 0!==t&&"smsText"==t&&($("#keypress").css("display","none"),$(".newUser").css("display","none"),$("#verifyWithCallBar").css("display","none"),$("#radioBtn").css("display","none"),$("#ivrPwdBtnContainer").css("display","none"),$("#ivrBtnContainer").css("display","none"),$("#ivr-mobile").css("display","none"),$("#noaction").css("display","none"),$("#smsFormIvr").show(),$("#smstext").css("display","block"),$(".jqibox ").css("display","none"),$(".jqiclose").css("display","none"))}function ivrServiceDown(){$.prompt("Our IVR Service is not working currently. Sorry for inconvenience, kindly try again.",{title:"Alert!",buttons:{OK:!0},submit:function(e,t,a,r){1==t&&(parent.window.location.href=baseurl+"?user_signup=error")}})}function pizzaManiaErrorHtml(){var e="";return e+='<div class="wrapper-pm">',e+='<div class="overlay-pm">',e+='<div class="popup-pm">',e+='<div class="headpop-pm">',e+="<p>Now you can choose from any of these combinations to order a Pizza Mania on delivery:</p>",e+='<img src="'+imageStaticUrl+'/images/close.png" width="16" height="16" class="close-pm-alert">',e+="</div>",e+='<div class="maincontent-pm">',e+='<div class="mania-pm">',e+='<img src="'+imageStaticUrl+'/images/mania1.png" class="mania1-pm">',e+='<img src="'+imageStaticUrl+'/images/or.jpg" width="38" height="38" class="or-pm">',e+="</div>",e+='<div class="mania-pm">',e+='<img src="'+imageStaticUrl+'/images/mania2.png" class="mania2-pm">',e+='<img src="'+imageStaticUrl+'/images/or.jpg" width="38" height="38" class="or-pm">',e+="</div>",e+='<div class="mania-pm">',e+='<img src="'+imageStaticUrl+'/images/mania3.png" class="mania3-pm">',e+="</div>",e+="</div>",e+='<div class="popfooter-pm">',e+='<a href="javascript:void(0);" class="close-pm-alert">OK</a>',e+="</div>",e+="</div>",e+="</div>"}function submitResponse(){var e="Oops! We are unable to place your order to the kitchen due to some technical reason. If you choose not to try again, or we are not able to place it in the next attempt, your payment will be refunded to your account/card within 7 working days depending on your bank. We sincerely regret the inconvenience, and in case you have applied an unique coupon, it will be automatically reactivated after 1 hour.";if(attempts<asyncOrderAttempt){var t="confirm=true&csrf_token="+csrf_async;$.ajax({type:"POST",url:baseurl+"/status/asynchronus",dataType:"json",data:t,cache:!1,success:function(t){t?"ST"!=t.error_code&&"PO"!=t.error_code&&"OF"!=t.error_code?"TH"!=t.error_code&&""!=t.msg?(hidePageBlocker(),$.prompt(t.msg,{title:"Info!",buttons:{Ok:!0},submit:function(e,a,r,o){1==a&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=t.url)}})):"TH"!=t.error_code&&""==t.msg?window.location=t.url:"TH"==t.error_code&&(window.location=t.url):"ST"!=t.error_code&&"OF"!=t.error_code||t.attempts!=asyncOrderAttempt?"PO"==t.error_code&&(flag=!1,window.location=baseurl+"/offline"):(hidePageBlocker(),$.prompt(e,{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=baseurl+"/logout?flag=thankyou")}})):t.attempts>asyncOrderAttempt&&(hidePageBlocker(),$.prompt(e,{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=baseurl+"/logout?flag=thankyou")}}))},error:function(){attempts>=asyncOrderAttempt&&(hidePageBlocker(),$.prompt(e,{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=baseurl+"/logout?flag=thankyou")}}))}})}else hidePageBlocker(),"undefined"!=typeof statusPageCall&&window.clearInterval(statusPageCall),$.prompt(e,{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=baseurl+"/logout?flag=thankyou")}})}$(document).ready(function(){$("ul.topnav li").each(function(){window.location.href.split("#")[0].indexOf($(this).find("a:first").attr("href"))>-1&&$(this).addClass("active").siblings().removeClass("active")}),$(document).on("click",".mapview",function(e){e.preventDefault(),"undefined"!=typeof zipperSource&&"secondary"==zipperSource&&$("#fade").popup("hide"),$("#zippr-map-loaded").hasClass("zippr-loaded")?setTimeout(function(){showZipprMap(),$.colorbox({inline:!0,href:"#zippr-map-loaded",width:"900px",height:"580px",onClosed:function(){$("#zippr-map-loaded").html(""),$("#zippr-map-loaded").css({height:"auto"})}})},500):void 0!==isZipprMapLoaded&&0==isZipprMapLoaded?$.getScript("https://zip.pr/static/mobileWidget/javascripts/mapLoader.js").done(function(){setTimeout(function(){showZipprMap(),$("#zippr-map-loaded").addClass("zippr-loaded"),$.colorbox({inline:!0,href:"#zippr-map-loaded",width:"900px",height:"580px",onClosed:function(){$("#zippr-map-loaded").html(""),$("#zippr-map-loaded").css({height:"auto"})}}),isZipprMapLoaded=!0},500)}):setTimeout(function(){showZipprMap(),$("#zippr-map-loaded").addClass("zippr-loaded"),$.colorbox({inline:!0,href:"#zippr-map-loaded",width:"900px",height:"580px",onClosed:function(){$("#zippr-map-loaded").html(""),$("#zippr-map-loaded").css({height:"auto"})}})},500)}),$("#loginform").submit(function(e){var t=!1;if(($.trim($("#txtMobileNo").val()).length<10||0==$.trim($("#txtPassword").val()).length)&&($.OLOMessages.set("Please enter a valid mobile number and your password.<br/>","Alert!"),t=!0),void 0!==$("#captcha-form-login").val()&&""==$.trim($("#captcha-form-login").val())&&($.OLOMessages.set("The text you entered was wrong. Kindly retry.<br/>","Alert!"),t=!0),t)return $.OLOMessages.displayAlert(),e.preventDefault(),!1});getUrlVars();if(void 0!==urlVariables.existing_user&&1==urlVariables.existing_user&&(hidePageBlocker(),$("#login").trigger("click"),$(".forgetPass").show(),$(".newUser").hide(),$(".loginLeft").hide(),$(".loginRight").hide(),$("#linkSubmit").attr("enabled","enabled")),void 0!==urlVariables.user_signup&&"error"==urlVariables.user_signup&&($("#login").trigger("click"),$(".newUser").show(),$(".loginLeft").hide(),$(".loginRight").hide(),$(".forgetPass").hide()),$("#fpform").submit(function(e){$(".loginpoperror").html("");var t=!1;if($.trim($("#fpMobile").val()).length<10&&($.OLOMessages.set("Please enter correct mobile number<br/>","Alert!"),t=!0),""==$.trim($("#captcha-form").val())&&($.OLOMessages.set("Please enter text as shown in the above image<br/>","Alert!"),t=!0),t)return $.OLOMessages.displayAlert(),e.preventDefault(),!1;$("#linkSubmit").attr("disabled","disabled")}),$("#txtMobileNo").keydown(function(e){if(0==this.value.length&&48==e.which)return!1;onlyNumbers(e)}),$("#mobile").keydown(function(e){if(0==this.value.length&&48==e.which)return!1;onlyNumbers(e)}),$("#fpMobile").keydown(function(e){if(0==this.value.length&&48==e.which)return!1;onlyNumbers(e)}),$("#mobileNumber").keydown(function(e){if(0==this.value.length&&48==e.which)return!1;onlyNumbers(e)}),$("#first_name").keydown(function(e){onlyAlphabet(e)}),$("#last_name").keydown(function(e){onlyAlphabet(e)}),$("#email").keydown(function(e){32==e.keyCode&&e.preventDefault()}),$("#signupSubmit").click(function(e){e.preventDefault();var t=/^[a-zA-Z]+$/,a=!1,r="Please enter ";($.trim($("#mobile_number").val()).length<10&&(r+="a valid mobile number, ",a=!0),0==$.trim($("#email").val()).length?(r+="a valid email address, ",a=!0):validateEmail($("#email").val())||(r+="a valid email address, ",a=!0),0==$.trim($("#first_name").val()).length?(r+="first name, ",a=!0):0==t.test($.trim($("#first_name").val()))&&(r+="first name (only alphabets), ",a=!0),0==$.trim($("#last_name").val()).length?(r+="last name , ",a=!0):0==t.test($.trim($("#last_name").val()))&&(r+="last name (only alphabets), ",a=!0),""==$.trim($("#dob").val())&&(r+="date of birth, ",a=!0),0==$("input[name='gender']:checked").length&&(r+="gender, ",a=!0),$("#pswrd").is(":checked"))&&(""==$("#password").val()&&(r+="Password.",a=!0));return a?(r=(r=r.replace(/,(?=[^,]*$)/,".")).replace(/,(?=[^,]*$)/," and "),$.OLOMessages.set(r,"Alert!"),$.OLOMessages.displayAlert(),!1):(showPageBlocker(),$.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}}),$(".jqidefaultbutton").css("display","none"),$(".jqiclose").css("display","none"),$("#signupform").submit(),!1)}),$("#mobile_number").keydown(function(e){if(0==this.value.length&&48==e.which)return!1;onlyNumbers(e)}),$(".offerstripClose").click(function(){var e=location.pathname.split("/");"menu"==(e=e[1])?$(".mid-body-menu").addClass("offerStripViewMenu"):"review"==e?$(".mid-body-all").addClass("offerStripViewReview"):$(".mid-body-homepage").addClass("offerStripViewIndex"),$.cookie("olo_offer_close",1,{path:"/",domain:"."+document.domain}),$(".offerStripViewReview").length>0&&$(".offerStripViewReview").css("margin-top",125)}),Custom.init(),"undefined"!=typeof errorMessage&&""!=errorMessage){var e="Alert!";"undefined"!=typeof errorType&&""!=errorType&&(e=errorType),$.OLOMessages.set(errorMessage,e),$.OLOMessages.displayAlert()}if("undefined"!=typeof statusPage&&1==statusPage&&("undefined"!=typeof statusPageErrormessage&&""!=statusPageErrormessage&&($.OLOMessages.set(statusPageErrormessage,"Oops!"),$.OLOMessages.displayAlert(),statusPageErrormessage=""),$("#submitform").on("click",function(){$.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}})})),$(window).width()<=768){var t;if(!((a=(t=(t=navigator.userAgent).toLowerCase()).search("opr"))>=0))if(!((a=t.search("opera mini"))>=0))var a=t.search("opis");if(a>=0)(t=document.cookie).search("BrowserIssueOperaMini")>=0||$.prompt("This browser does not support the application. Kindly retry with other browser.",{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&(document.cookie="BrowserIssueOperaMini")}})}$(document).on("click",".close-pm-alert",function(){$(".wrapper-pm").remove()}),$(document).on("click","#signhUpResendOtp",function(){$("#signupSubmit").trigger("click")}),$("#tb1").keypress(function(e){(e.which<48&&8!=e.which||e.which>57&&e.which<65||e.which>90&&e.which<97||e.which>122)&&e.preventDefault()})}),onlyNumbers=function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65==e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()},validateEmail=function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)},$(document).on("click","#login",function(){var e=$("#appliedCouponStatus").val();void 0!==e&&"yes"==e?$.prompt("Your cart will empty after successful login.",{title:"Alert!",buttons:{Ok:!0,Cancel:!1},submit:function(e,t,a,r){1==t&&$("#slide").popup("show")}}):$("#slide").popup("show"),$("#smsFormIvr").hide()}),onlyAlphabet=function(e){if($(window).width()<=768){var t=navigator.userAgent;if(!((a=(t=t.toLowerCase()).search("chrome"))>=0))var a=t.search("opr");if(a>=0){var r=document.getElementById("firstname");document.getElementById("lastname")==document.activeElement&&(r=document.getElementById("lastname")),r.addEventListener("textInput",function(t){var a=t.data.charCodeAt(0);a>=65&&a<=90||(!(a>=97&&a<=122)||9==a||46==a||a>=35&&a<=40?t.preventDefault():32==a&&e.preventDefault())})}else o()}else o();function o(){var t=e.keyCode;8==t||9==t||46==t||t>=35&&t<=40||t>=65&&t<=90?32==t&&e.preventDefault():e.preventDefault()}},$(function(){$(".xdsoft_datetimepicker").on("blur",function(e){$(this).xdsoft_datetimepicker("hide")})}),$(function(){$(".strip-toggle").on("click",function(){$(this).toggleClass("active"),$(".linear-menu").slideToggle("slow")})}),$(function(){if("undefined"!=typeof asyncStatusPage&&1==asyncStatusPage){showPageBlocker(),attempts=0;var e=!0;statusPageCall=setInterval(function(){1!=e&&1!=e&&"true"!=e||(submitResponse(),attempts++)},1e4)}if("undefined"!=typeof offlineAsyncStatusPage&&1==offlineAsyncStatusPage){"undefined"!=typeof offlinePageErrormessage&&""!=offlinePageErrormessage&&$.prompt(offlinePageErrormessage,{title:"Info!",buttons:{Ok:!0},submit:function(e,t,a,r){1==t&&($(".jqibox").addClass("hide"),showPageBlocker(),window.location=baseurl+"/logout?flag=thankyou")}}),attempts=0;e=!0;statusPageCall=setInterval(function(){1!=e&&1!=e&&"true"!=e||(showPageBlocker(),submitResponse(),attempts++)},asyncOfflineInterval)}});var balanceBoxCount=0;function balanceInfo(e){var t=$("#voucher-balance-captcha-form").val();if(""==t)return $.prompt("<div>Please enter Captcha </div>",{title:"<center>Invalid Captcha..</center>",buttons:{OK:!1}}),!1;if(-1!==$.inArray("",e))return $.prompt("<div>Please enter a valid Dominos Gift Card number </div>",{title:"<center>Invalid Gift Card number entered..</center>",buttons:{OK:!1}}),!1;for(var a=0;a<e.length;a++)if(e[a].length>16)return $.prompt("<div>Dominos Gift Card number cannot be more than 16 digits. </div>",{title:"<center>Invalid Gift Card number entered..</center>",buttons:{OK:!1}}),!1;showPageBlocker(),e=$.unique(e);$.ajax({type:"post",url:baseurl+"/payment/getbalanceinfo",data:{cardNumber:e,isAjaxRequest:"json",balanceInfoFlag:1,voucherCaptcha:t},dataType:"json",success:function(e){hidePageBlocker();for(var t="",a="",r=0;r<e.length;r++){var o=e[r].ResponseMessage.toUpperCase(),i=e[r].ResponseCode;if("undefined"!=o&&""!=o||(o="Please try after some time"),"3"==i&&"0"!=i){document.getElementById("voucher-balance-captcha-form").focus(),document.getElementById("voucherBalanceCaptcha").src=baseurl+"/getSecondCaptcha?"+Math.random(),a+=o;break}"0"==i?(document.getElementById("voucher-balance-captcha-form").focus(),document.getElementById("voucherBalanceCaptcha").src=baseurl+"/getSecondCaptcha?"+Math.random(),t+="cardbalance"+(r+1)+'- <i class="fa fa-inr"></i>'+e[r].Amount+"</br>"):(document.getElementById("voucher-balance-captcha-form").focus(),document.getElementById("voucherBalanceCaptcha").src=baseurl+"/getSecondCaptcha?"+Math.random(),a+="<b>Error in Card"+(r+1)+"- </b>",a+=o+"</br>")}if(""!=a)return $.prompt("<div>"+a+"</div>",{title:"<center>Dominos Gift Card Details</center>",buttons:{OK:!1}}),!1;$.prompt("<center><b>CARD INFO</b></center><br><div><b><td>"+t+"</td></b></div>",{title:"<center>Dominos Gift Card Details</center>",buttons:{OK:!1}})},error:function(){return hidePageBlocker(),$.OLOMessages.set("Sorry problem in Balance Enquiry","Error!"),$.OLOMessages.displayAlert(),!1}})}function errorPrompt(e,t,a,r){void 0!==e&&""!==e&&void 0!==a&&void 0!==r&&$.prompt(e,{title:r,buttons:a,submit:function(e,a,r,o){1==a&&void 0!==t&&""!=t&&(window.location.href=t)}})}$(document).on("click","#addCard",function(){balanceBoxCount++;if($("#cardContainer").append('<div class="card-info-box" style="width: 100%; float: left;">\n<span class = "card-perfix">100738</span>\n <div class = "qcContainer">\n      <input type="text" class="inputcard"  value="" placeholder="Enter Card" name = "card_number[]" style = "width:90%"> \n      \n       </div><i aria-hidden="true" class="fa fa-times balance_remove_qc_Container remove_button"></i></div>'),1==balanceBoxCount)return $("#addCard").remove(),!1}),$(document).on("click",".balance_remove_qc_Container",function(){$(this).parent(".card-info-box").remove(),balanceBoxCount>0&&(balanceBoxCount-=1),0==balanceBoxCount&&$(".button_append").append('<input class="addQcContainer" id="addCard" type="button" value="Add Card">')}),$(document).on("click","#submitE-Voucher",function(){balanceInfo($("input[name='card_number[]']").map(function(){return $(this).val()}).get())});