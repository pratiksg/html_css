function IVRconfirm(e){showPageBlocker();var a=$.trim($("#first_name").val()),s=$.trim($("#last_name").val()),r=$.trim($("#email").val()),t=$.trim($("#dob").val()),i=$("input[name='gender']:checked").val(),o=$("#action_from").val();$.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}}),$(".jqidefaultbutton").css("display","none"),$(".jqiclose").css("display","none"),$.ajax({type:"POST",url:baseurl+"/verifywithivrcall",data:{mobile:e,user:"registration",firstname:a,lastname:s,email:r,customers_dob:t,customers_gender:i,action_from:o},cache:!1,success:function(e){if(1==e)window.location.href="dashboard";else{if(2==e){var a="It appears that you have pressed the wrong key. Please try again.";return $.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}}),!1}if(3==e){var a="It appears that you have not pressed any key. Please try again.";return $.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}}),!1}if(4==e){var a="You seemed to have reach maximum number of attempts. Please try after some time.";return $.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}}),!1}if(-6==e){var a="Please Try again";return $.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}}),!1}if(6==e)$(".newUser").css("display","none"),$("#keypress").css("display","none"),$("#noresponce").css("display","none"),$("#smstext").css("display","none"),$("#ivrPwdValidationBtn").prop("disabled",!1),$("#ivrValidationBtn").prop("disabled",!1);else if(7==e)$(".newUser").css("display","none"),$("#ivrPwdBtnContainer").css("display","block"),$("#ivr_validation_form").css("display","block"),$("#keypress").css("display","none"),$("#noresponce").css("display","none"),$("#smstext").css("display","none"),$("#ivrPwdValidationBtn").prop("disabled",!1),$("#ivrValidationBtn").prop("disabled",!1);else if(8==e){var a="Some internal error occured. Please try again!";$.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}})}else if("validation_error"==e)window.location.href=baseurl+"?user_signup=error";else if("existing_customer"==e)window.location.href=baseurl+"?existing_user=1";else{if("sms_send"==e){var s=e;$("#sms").val(s),$("#keypress").css("display","none"),$(".newUser").css("display","none"),$("#verifyWithCallBar").css("display","none"),$("#radioBtn").css("display","none"),$("#ivrPwdBtnContainer").css("display","none"),$("#ivrBtnContainer").css("display","none"),$("#ivr-mobile").css("display","none"),$("#noaction").css("display","none"),$("#smsForm").show(),$("#smstext").css("display","block")}$(".jqibox").css("display","none")}}$(".jqibox").css("display","none")},complete:function(){hidePageBlocker()},error:function(){hidePageBlocker()}})}function submitform(){var e=$.trim($("#first_name").val()),a=$.trim($("#last_name").val()),s=$.trim($("#email").val()),r=$.trim($("#dob").val()),t=$("input[name='gender']:checked").val(),i=$.trim($("#smscode").val()),o=$.trim($("#mobile_number").val()),n=$.trim($("#action_from").val());if(""!=i)$.ajax({type:"POST",url:baseurl+"/verifywithivrsms",data:{smscode:i,user:"registration",mobile:o,firstname:e,lastname:a,email:s,customers_dob:r,customers_gender:t,action_from:n},cache:!1,success:function(e){if(1==e)$("#smstext").css("display","none"),$.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}}),$(".jqidefaultbutton").css("display","none"),$(".jqiclose").css("display","none"),window.location.href="dashboard";else{if(8==e){$("#submit-smscode").prop("disabled",!1);var a="Some internal error occured. Please try again.";return $.prompt(a,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}}),!1}if("validation_error"==e)window.location.href=baseurl+"?user_signup=error";else if("existing_customer"==e)window.location.href=baseurl+"?existing_customer=true";else if(0==e){var a="You seem to have entered an invalid code. Please try again.";$.prompt(a,{title:"Alert!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}})}else{var a="You seem to have entered an invalid code. Please try again.";$.prompt(a,{title:"Alert!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}})}}}});else{var l="Please enter authorisation code.";$.prompt(l,{title:"Alert!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}})}}function setMessage(e,a){$(a).addClass("has-error"),$(a+"-error").show(),$(a+"-error").html(e)}function ivrCall(){$("#pwdErrorMsg").hide();var e=$.trim($("#mobile").val()),a=$.trim($("#password").val()),s=$("#captcha-form").val(),r=!1;if(""==a&&($.OLOMessages.set("Please enter your password to verify mobile number<br/>","Alert!"),r=!0),""==s&&($.OLOMessages.set("Please enter captcha value","Alert!"),r=!0),r)return $.OLOMessages.displayAlert(),!1;var t=$.trim($("#first_name").val()),i=$.trim($("#last_name").val()),o=$.trim($("#email").val()),n=$.trim($("#dob").val()),l=$("input[name='gender']:checked").val(),u=$("#action_from").val();if($.prompt('<center>Validation in progress... Please do not refresh.</center><br><div class="progress"><div style="width: 100%" aria-valuemax="100" aria-valuemin="0" aria-valuenow="100" role="progressbar" class="progress-bar progress-bar-striped active"></div></div>',{title:"<center>Please Wait..</center>",buttons:{}}),$(".jqidefaultbutton").css("display","none"),$(".jqiclose").css("display","none"),""!=e&&""==a)IVRconfirm(e);else if(""!=e&&""!=a){$("#smscode").val();$.ajax({type:"POST",dataType:"json",url:baseurl+"/verifywithdominospassword",data:{txtMobileNo:e,password:a,user:"registration",firstname:t,lastname:i,email:o,customers_dob:n,captcha:s,customers_gender:l,action_from:u},cache:!1,success:function(e){if(showPageBlocker(),1==e.status)$("#ivrPwdValidationBtn").prop("disabled",!0),window.location.href="dashboard";else{if(0==e.status){document.getElementById("captcha").src=baseurl+"/getcaptcha?"+Math.random(),$("#captcha-form").val(""),document.getElementById("captcha-form").focus();var a="You have entered an incorrect mobile number / password.Kindly try again";return $.prompt(a,{title:"Error!",buttons:{Ok:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}}),!1}if(2==e.status){document.getElementById("captcha").src=baseurl+"/getcaptcha?"+Math.random(),$("#captcha-form").val(""),document.getElementById("captcha-form").focus();var a="The text you typed did not match with the image. Kindly retry";return $.prompt(a,{title:"Error!",buttons:{Ok:!0},submit:function(e,a,s,r){1==a&&$(".jqibox").css("display","none")}}),!1}"validation_error"==e.status?window.location.href=baseurl+"?user_signup=error":"existing_customer"==e.status&&(window.location.href=baseurl+"?existing_user=1")}$(".jqibox").css("display","none")},complete:function(){hidePageBlocker()}})}else{var d="You can not forge with mobile number.";$("#ivrPwdValidationBtn").prop("disabled",!1),$.prompt(d,{title:"Error!",buttons:{Ok:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}})}}function removeMessage(e){$(e).removeClass("has-error"),$(e+"-error").hide()}function submitUserInfoForm(){$("#errorMsg").hide();var e=!1,a=$.trim($("#mobileNumber").val());""==a?(setMessage("Please enter mobile number","#mobileNumber"),e=!0):removeMessage("#mobileNumber"),a.length>10||a.length<10?(setMessage("Mobile number must contain 10 digit","#mobileNumber"),e=!0):removeMessage("#mobileNumber");var s=/(6|7|8|9)\d{9}/,r=s.test(a);0==r?(setMessage("Please enter a valid mobile number","#mobileNumber"),e=!0):removeMessage("#mobileNumber");var t=$.trim($("#firstName").val()),i=/^[a-zA-Z]+$/;""==t?(setMessage("First name can not be blank","#firstName"),e=!0):removeMessage("#firstName"),i.test(t)?removeMessage("#firstName"):(setMessage("First name can contain only characters","#firstName"),e=!0);var o=$.trim($("#lastName").val());""==o?(setMessage("Last name can not be blank","#lastName"),e=!0):removeMessage("#lastName"),i.test(o)?removeMessage("#lastName"):(setMessage("Last name can contain only characters","#lastName"),e=!0);var n=$.trim($("#emailAddress").val()),l=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;""==n?(setMessage("Email field can not be blank","#emailAddress"),e=!0):removeMessage("#emailAddress"),l.test(n)?removeMessage("#emailAddress"):(setMessage("Invalid email address","#emailAddress"),e=!0);var u=$.trim($("#dOB").val()),d=$.datepicker.formatDate("mm/dd/yy",new Date),m=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[0-1])\/([0-9]{4})$/;return""==u?(setMessage("Date of Birth cannot be blank","#dOB"),e=!0):m.test(u)?$.datepicker.parseDate("mm/dd/yy",u)>$.datepicker.parseDate("mm/dd/yy",d)?(setMessage("Date of Birth cannot be greater than "+d+"(mm/dd/yy)","#dOB"),e=!0):removeMessage("#dOB"):(setMessage("Invalid date format. Please enter date in this mm/dd/yy format!","#dOB"),e=!0),1==e?!1:!0}var hiddenMobileNumber="";$(document).ready(function(){$("#dOB").datepicker({changeMonth:!0,changeYear:!0,yearRange:"-100:+0"}),hiddenMobileNumber=$.trim($("#mobile").val()),$("#submitFbUserInfo").click(function(){var e=submitUserInfoForm();return 1==e&&$("#fbUserInfo").submit(),e}),$("#submitFbUserInfo").bind("keypress",function(e){if(13==e.keyCode){var a=submitUserInfoForm();return 1==a&&$("#fbUserInfo").submit(),a}}),$("#submit-smscode").click(function(){submitform()}),$("#smsForm").bind("keypress",function(e){return 13==e.keyCode?(submitform(),!1):void 0}),$("input[name='ivrverify']").change(function(){if("pwd"==$(this).val()){$("#signupform").attr("action",baseurl+"/verifywithpassword"),$("#signupform").attr("method","POST"),$("#signupivrframe").attr("src",baseurl+"/verifywithpassword");var e='<input type="password" name="password" id="password" maxlength="20" value="" placeholder="Enter your password*"/>';$("#validationWithPwd").html(e).show(),$("#signupform").attr("target","")}else $("#signupform").attr("target","iframe-user-signup"),$("#signupform").attr("action",baseurl+"/validatewithivrcall"),$("#signupivrframe").attr("src",baseurl+"/validatewithivrcall"),$("#validationWithPwd").html("")}),$("#ivrPwdValidationBtn").click(function(e){e.preventDefault(),ivrCall()});var e=$.trim($("#mobile").val());$("#ivrValidationBtn").click(function(){$(this).prop("disabled","disabled");var a=$.trim($("#mobile").val());if(""!=a&&""!=hiddenMobileNumber&&a==hiddenMobileNumber)IVRconfirm(e);else{var s="You can not forget with mobile number.";$.prompt(s,{title:"Error!",buttons:{OK:!0},submit:function(e,a,s,r){1==a&&(window.location.href=baseurl)}})}})});